<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Redis is not just a key value store, itâ€™s more than that. I always had this thought and wanted to learn more about it. At this time, I badly want to get this and this done. But I am not going to do th">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis Adventures">
<meta property="og:url" content="https://vishnubharathi.codes/blog/redis-adventures/index.html">
<meta property="og:site_name" content="Vishnu Bharathi">
<meta property="og:description" content="Redis is not just a key value store, itâ€™s more than that. I always had this thought and wanted to learn more about it. At this time, I badly want to get this and this done. But I am not going to do th">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn-images-1.medium.com/max/2000/1*GZHfWXJn1wv5Bmp9EZadoA.png">
<meta property="og:image" content="https://cdn-images-1.medium.com/max/2000/1*_kWSL_j4d8WUqfgAV8vYFw.png">
<meta property="og:image" content="https://cdn-images-1.medium.com/max/2000/1*ib7RpB4KdIm78cNGaHuzrQ.png">
<meta property="article:published_time" content="2017-09-15T22:30:00.000Z">
<meta property="article:modified_time" content="2026-01-21T01:24:51.578Z">
<meta property="article:author" content="Vishnu Bharathi">
<meta property="article:tag" content="blogging">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn-images-1.medium.com/max/2000/1*GZHfWXJn1wv5Bmp9EZadoA.png">
    
    
        
          
              <link rel="shortcut icon" href="https://www.gravatar.com/avatar/261fb0f50b7dea501c807ac01f242343?s=16">
          
        
        
          
            <link rel="icon" type="image/png" href="https://www.gravatar.com/avatar/261fb0f50b7dea501c807ac01f242343?s=192" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="https://www.gravatar.com/avatar/261fb0f50b7dea501c807ac01f242343?s=180">
          
        
    
    <!-- title -->
    <title>Redis Adventures</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">ğŸ  Home</a></li>
         
          <li><a href="/archives/">âœï¸ Blog</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/blog/log-1/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/blog/scribble/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://vishnubharathi.codes/blog/redis-adventures/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://vishnubharathi.codes/blog/redis-adventures/&text=Redis Adventures"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://vishnubharathi.codes/blog/redis-adventures/&title=Redis Adventures"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://vishnubharathi.codes/blog/redis-adventures/&is_video=false&description=Redis Adventures"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Redis Adventures&body=Check out this article: https://vishnubharathi.codes/blog/redis-adventures/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://vishnubharathi.codes/blog/redis-adventures/&title=Redis Adventures"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://vishnubharathi.codes/blog/redis-adventures/&title=Redis Adventures"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://vishnubharathi.codes/blog/redis-adventures/&title=Redis Adventures"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://vishnubharathi.codes/blog/redis-adventures/&title=Redis Adventures"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://vishnubharathi.codes/blog/redis-adventures/&name=Redis Adventures&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://vishnubharathi.codes/blog/redis-adventures/&t=Redis Adventures"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Getting-Started"><span class="toc-number">1.</span> <span class="toc-text">Getting Started</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Basics"><span class="toc-number">2.</span> <span class="toc-text">Basics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bitmaps"><span class="toc-number">3.</span> <span class="toc-text">Bitmaps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Producer-Consumer-Pattern"><span class="toc-number">4.</span> <span class="toc-text">Producer Consumer Pattern</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MULTI-EXEC"><span class="toc-number">5.</span> <span class="toc-text">MULTI EXEC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pub-Sub-Pattern"><span class="toc-number">6.</span> <span class="toc-text">Pub&#x2F;Sub Pattern</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lua-Scripting"><span class="toc-number">7.</span> <span class="toc-text">Lua Scripting</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#More-stuff"><span class="toc-number">8.</span> <span class="toc-text">More stuff</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%9C%E0%AE%A4%E0%AF%81%E0%AE%A9%E0%AF%8D%E0%AE%AA%E0%AF%81%E0%AE%B1%E0%AF%82%E0%AE%89%E0%AE%AE%E0%AF%8D-%E0%AE%A4%E0%AF%81%E0%AE%B5%E0%AF%8D%E0%AE%B5%E0%AE%BE%E0%AE%AE%E0%AF%88-%E0%AE%87%E0%AE%B2%E0%AF%8D%E0%AE%B2%E0%AE%BE%E0%AE%95%E0%AF%81%E0%AE%AE%E0%AF%8D-%E0%AE%AF%E0%AE%BE%E0%AE%B0%E0%AF%8D%E0%AE%AE%E0%AE%BE%E0%AE%9F%E0%AF%8D%E0%AE%9F%E0%AF%81%E0%AE%AE%E0%AF%8D"><span class="toc-number"></span> <span class="toc-text">â€œà®¤à¯à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯ à®¤à¯à®µà¯à®µà®¾à®®à¯ˆ à®‡à®²à¯à®²à®¾à®•à¯à®®à¯ à®¯à®¾à®°à¯à®®à®¾à®Ÿà¯à®Ÿà¯à®®à¯</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E0%AE%87%E0%AE%A9%E0%AF%8D%E0%AE%AA%E0%AF%81%E0%AE%B1%E0%AF%82%E0%AE%89%E0%AE%AE%E0%AF%8D-%E0%AE%87%E0%AE%A9%E0%AF%8D%E0%AE%9A%E0%AF%8A-%E0%AE%B2%E0%AE%B5%E0%AE%B0%E0%AF%8D%E0%AE%95%E0%AF%8D%E0%AE%95%E0%AF%81-%E2%80%9D"><span class="toc-number"></span> <span class="toc-text">à®‡à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯ à®‡à®©à¯à®šà¯Š à®²à®µà®°à¯à®•à¯à®•à¯.â€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%94-%E0%AE%A4%E0%AE%BF%E0%AE%B0%E0%AF%81%E0%AE%95%E0%AF%8D%E0%AE%95%E0%AF%81%E0%AE%B1%E0%AE%B3%E0%AF%8D"><span class="toc-number"></span> <span class="toc-text">â€” à®¤à®¿à®°à¯à®•à¯à®•à¯à®±à®³à¯</span></a>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Redis Adventures
    </h1>



    <div class="meta">
      
    <div class="postdate">
      
        <time datetime="2017-09-15T22:30:00.000Z" itemprop="datePublished">2017-09-16</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/blogging/" rel="tag">blogging</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Redis is not just a key value store, itâ€™s more than that. I always had this thought and wanted to learn more about it. At this time, I badly want to get this and this done. But I am not going to do them right away. Instead, I am going to take time to read more about Redis.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*GZHfWXJn1wv5Bmp9EZadoA.png" alt="The Redis trademark and logos are owned by Salvatore Sanfilippo. This article complies with [https://redis.io/topics/trademark](https://redis.io/topics/trademark)"><em>The Redis trademark and logos are owned by Salvatore Sanfilippo. This article complies with <a target="_blank" rel="noopener" href="https://redis.io/topics/trademark">https://redis.io/topics/trademark</a></em></p>
<p>I will try to document my journey as I go and share the things that fascinated me along the way.</p>
<h3 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h3><p>If you are not familiar with Redis, here is a quote from the its <a target="_blank" rel="noopener" href="https://redis.io/">homepage</a>,</p>
<blockquote>
<p>Redis is an open source (BSD licensed), in-memory data structure store, used as a database, cache and message broker<a target="_blank" rel="noopener" href="https://redis.io/">â€¦â€¦.</a></p>
</blockquote>
<p>I will use <a target="_blank" rel="noopener" href="https://www.docker.com/">docker</a> to <a target="_blank" rel="noopener" href="https://hub.docker.com/r/library/redis/">run Redis</a>, as I prefer it over <a target="_blank" rel="noopener" href="https://redis.io/download">downloading and installing</a>. Unfortunately, there is no trace of running Redis with docker on the official site, so I opened <a target="_blank" rel="noopener" href="https://github.com/antirez/redis-doc/issues/857">an issue on github requesting it</a>. (Ah, <a target="_blank" rel="noopener" href="https://github.com/antirez/redis-doc/issues/857#issuecomment-322242993">the response arrived</a>)</p>
<p>Redis site recommends following <a target="_blank" rel="noopener" href="https://twitter.com/redisfeed">this twitter account</a> for updates. So, I just did.</p>
<p>With a single docker command, I have it up and running in my machine.</p>
<pre><code>$ docker run --name some-redis -d redis
</code></pre><h3 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h3><p>Before doing anything on my local machine, I am going to head on to <a target="_blank" rel="noopener" href="http://try.redis.io/">http://try.redis.io/</a> to try out the classic way of learning about Redis.</p>
<p>Some basic commands, that I learnt are</p>
<pre><code># SET KEY VALUE
#==============
SET key &quot;value&quot; # key is case sensitive
SET intKey 10
SETNX intKey 11 # SET NOT EXISTS


# GET KEY
#========
GET key
GET intKey

# Int operations
#================
INCR intKey  # Increment and [why is it even there?](https://github.com/badboy/try.redis/blob/master/tutorial/03.markdown)
DECR intKey  # Decrement

# SET with EXPIRE and TTL (Time to Live)
#=======================================
SET clientToken &quot;super-secret-token&quot;
EXPIRE clientToken 120 # will be stored only for 120 seconds
TTL clientToken 
# =&gt; 118 means 2 seconds elapsed.
# =&gt; -1 means no expiration is set.
# =&gt; -2 means expired already.
SET clientToken &quot;refreshed-token&quot;
TTL clientToken # yields -1, as reset.

# List operations
#================
RPUSH game scooby # right push
LPUSH game dexter # left push
LRANGE game 0 -1  # range over all items
LRANGE game 0 0   # range from startIndex to endIndex
RPOP game         # right pop
LPOP game         # left pop
LLEN game         # length of the list

# Set (Data structure) operations
#================================
# Recommend reading =&gt; [Wikipedia](https://en.wikipedia.org/wiki/Set_(abstract_data_type))
SADD powers &quot;flight&quot;  
SREM powers &quot;flight&quot;
SMEMBERS powers
SISMEMBER powers flight
SUNION powers weapons

# Sorted Set
#===========
# Good to follow [this](https://github.com/badboy/try.redis/blob/master/tutorial/09.markdown). TODO: Dig deep to figure out
# relation and boundaries between sets, sorted sets and lists

# Hashes
#=======
# perfect to hold world objects
HSET user:1001 name &quot;katniss&quot;
HSET user:1001 age 26
HSET user:1001 movie &quot;The Hunger Games&quot;
HGETALL user:1001 # get all props and values
HGET user:1001 # get the value of movie property
HMSET user:1002 name &quot;Neo&quot; age 52 movie &quot;The Matrix&quot; # multiple set
HDEL user:1002 movie
HINCRBY user:1002 age 1 # atomic increment
</code></pre><p>Thatâ€™s good! I got to know some basic data structures in Redis. Reading <a target="_blank" rel="noopener" href="https://redis.io/topics/data-types-intro">https://redis.io/topics/data-types-intro</a> for more information.</p>
<p>It seems like lists in Redis are implemented using Linked Lists. So, it takes constant time for insertion and deletion from both ends.</p>
<h3 id="Bitmaps"><a href="#Bitmaps" class="headerlink" title="Bitmaps"></a>Bitmaps</h3><p>Bitmaps are awesome. I first heard about it in a JavaScript conference, where the speaker talks about using bits instead of JSON objects and achieves high memory throughput.</p>
<center><iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries" frameborder="0" allowfullscreen></iframe></center>

<p>I remembered that optimisation from then, but I didnâ€™t know of the name â€œBitmapâ€. One fine day, <a target="_blank" rel="noopener" href="https://twitter.com/argon_laser">my friend</a> introduced me to the term and discussed how he used it in various use cases.</p>
<p>If you are wondering what bitmaps are, I recommend to take read about it in <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Bit_array">Wikipedia</a>. In simple terms, itâ€™s a collection of bits. 1111000 is a bitmap, that will take lesser memory to represent the attendance of a student in a week than, having separate entries (structs/db entries) for each day. 1â€™s represent that student was present on the day of that week and 0â€™s represent absence.</p>
<p>And <a target="_blank" rel="noopener" href="https://redis.io/commands/setbit">you can use Bitmaps in Redis.</a></p>
<h3 id="Producer-Consumer-Pattern"><a href="#Producer-Consumer-Pattern" class="headerlink" title="Producer Consumer Pattern"></a>Producer Consumer Pattern</h3><p>I use this pattern in lot of places. At my work, almost all microservices follow this pattern. Here is a small pictorial representation of this pattern</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*_kWSL_j4d8WUqfgAV8vYFw.png" alt="Producer Consumer Pattern ( via draw.io ). Dotted line mean listening. Solid line means listening and consuming."><em>Producer Consumer Pattern ( via draw.io ). Dotted line mean listening. Solid line means listening and consuming.</em></p>
<p>I will demonstrate how this pattern is being used on the project <a target="_blank" rel="noopener" href="https://github.com/scriptnull/badgeit">I am working on</a>. Itâ€™s this project called <a target="_blank" rel="noopener" href="http://badgeit.today">Badgeit</a>, which is a website that guesses the badges that can be added on a source code repositoryâ€™s README.md file (Usually present to describe what the software does in a code repository).</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*ib7RpB4KdIm78cNGaHuzrQ.png" alt="Example of badges in README.md file of project"><em>Example of badges in README.md file of project</em></p>
<p>We run an API server which has an end point POST /badges that accepts a git repository URL as input. This endpoint clones the git repository and reads through the source code files and will send back badge suggestions. Git clone is a costly process and we should not be doing it for each and every request that arrives. In fact, I run only one server machine which has around 990MB RAM space on AWS. If we clone naively for each and every request we might soon run out of memory. Here are some conditions on how I want cloning to happen.</p>
<ol>
<li><p>At any given point of time, I want to have finite number of clones to happen on the server. ( This finite number is the number of workers )</p>
</li>
<li><p>First come first serve basis.</p>
</li>
<li><p>Equally distribute the task among the available workers.</p>
</li>
</ol>
<p>So, I created another stateless service called <em>worker</em> and decoupled the git repo cloning logic from <em>api</em>. <em>api </em>service is the producer and worker service is the consumer.</p>
<p>I am already using RabbitMq, which is pretty heavy weight and serves only as a Queue for producer consumer pattern. But I need a piece of software that could act as queue and also as a cache. Hmm. Sounds very familiar. Redis to rescue!<br><a target="_blank" rel="noopener" href="https://github.com/scriptnull/badgeit/issues/22"><strong>Remove RabbitMq and introduce Redis Â· Issue #22 Â· scriptnull/badgeit</strong><br><em>RabbitMq is a pure queue. But redis can act as cache + queue. And I suspect redis to be have much lower memoryâ€¦</em>github.com</a></p>
<p>To implement this in Redis, I will make my producer to send <a target="_blank" rel="noopener" href="https://redis.io/commands/lpush">LPUSH</a> redis command for adding the payload to a redis list. In my consumer, I will use <a target="_blank" rel="noopener" href="https://redis.io/commands/brpop">BRPOP</a> to do a blocking pop operation.</p>
<p>Let me give it a try. Ah! I got it right.</p>
<p>Both the producer and worker can use the following snippet to establish a connection.</p>
<iframe src="https://medium.com/media/c9c76c66bcd4f5a08a953da5256055af" frameborder=0></iframe>

<p>Fun Fact: you can use INFO redis command to check how many active clients are connected.</p>
<iframe src="https://medium.com/media/63c90c6b0a385ae0bf8bd31a5d4d2da9" frameborder=0></iframe>

<h3 id="MULTI-EXEC"><a href="#MULTI-EXEC" class="headerlink" title="MULTI EXEC"></a>MULTI EXEC</h3><p>If you have used SQL databases, you should be familiar of this fancy term â€œtransactionsâ€. oh yeah! Redis has these two commands for the exact same reason.</p>
<p>In the publisher consumer pattern, we just pushed the payload to the queue. What if I want to do rate limiting ? That is neglect the future requests for adding a repository in queue if it is already in the queue or being consumed by a worker.</p>
<p>Is it ok to range over the queue ? Definitely not. A queue is a data structure in which data access should be at one of the ends. Ranging over queues is not going to do us any good, because it is going to get all the elements in the queue and load it in the clientâ€™s memory ( in my case a api server written in Go ).</p>
<p>So, I went on to maintain a SET, which is an efficient for doing operations like ISMEMBER. By maintaining a some keys ( which denote each payload in the queue ) in a set, we can easily determine if a request to queue a repository should be processed.</p>
<p>But the thing here is the set should be in sync with our queue. Before we choose to queue, it MUST be added to the set. If the add to set operation fails, then we MUST not add it to the queue. So, we could just wrap both the insert operations inside a MULTI EXEC block. That way, we donâ€™t end up in stale states.</p>
<iframe src="https://medium.com/media/1e7fa5c8904823feda25cd21705d08f7" frameborder=0></iframe>

<h3 id="Pub-Sub-Pattern"><a href="#Pub-Sub-Pattern" class="headerlink" title="Pub/Sub Pattern"></a>Pub/Sub Pattern</h3><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern"><strong>Publish-subscribe pattern - Wikipedia</strong><br><em>In software architecture, publish-subscribe is a messaging pattern where senders of messages, called publishers, do notâ€¦</em>en.wikipedia.org</a></p>
<p>Redis has SUBSCRIBE, PUBLISH, UNSUBSCRIBE commands and supports the publish subscribe pattern. I have given it a try only on the command line. But, I can clearly imagine the scope of this feature.</p>
<p>Lets say we have a billing application in an ice cream shop ( why ice cream shop? because I love them ). After someone purchases an ice cream, the shop collects the phone number and email of the customer. They collect it to send a discount coupon to the customerâ€™s mobile as SMS and an Email ( Donâ€™t ask me why do we have to do something like this. These days, all the people do this stuff ). The ice cream shopâ€™s server runs two services, one sends SMS to the mobile and other one to send the email. Using a queue here is an anti pattern, because whenever a message arrives in the queue, either one of the service consumes it and it becomes unavailable for the other service. So, it might be wise to use a redis SUBSCRIBE to listen for a particular event and do some action.</p>
<p>This particular approach is very useful, when the number of subscribers increase. Example: letâ€™s say that the ice cream shop decides to keep track of some bounty points for each purchase they do, they might have to just introduce one more service that subscribes to our customer sale event.</p>
<p>Also note that PSUBSCRIBE, PUNSUBSCRIBE are also present, which is a useful variant for pattern matching operations.</p>
<pre><code>SUBSCRIBE user.created # listens for user.created event
SUBSCRIBE user.updated

PSUBSCRIBE user.*      # listens for all events starting with user.
PUNSUBSCRIBE user.*
</code></pre><h3 id="Lua-Scripting"><a href="#Lua-Scripting" class="headerlink" title="Lua Scripting"></a>Lua Scripting</h3><p>I am surprised to know that Redis supports <a target="_blank" rel="noopener" href="https://www.lua.org/">Lua</a> Scripts. <a target="_blank" rel="noopener" href="https://www.lua.org/">Lua</a> is a programming language, which I have tried using previously for developing games. Some of the things in my mind are</p>
<p>â€œHow exactly is Lua scripting useful in Redis? Why did they built it into Redis? Why Lua? why not some other programming language?â€</p>
<p>I am still not using it in any application, but when time arrives I will probably understand more about this.</p>
<h3 id="More-stuff"><a href="#More-stuff" class="headerlink" title="More stuff"></a>More stuff</h3><p>I probably just played with swings and circles in Redis, I am sure that there are roller coasters and huge water slides. I hope to ride them in future. But for now, I had fun with what I experienced.</p>
<p>Thanks for reading. I quote verses from my favourite Tamil literature â€œ<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Tirukku%E1%B9%9Ba%E1%B8%B7">Tirukkuá¹›aá¸·</a>â€ at the end of my blog posts.</p>
<blockquote>
<h1 id="â€œà®¤à¯à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯-à®¤à¯à®µà¯à®µà®¾à®®à¯ˆ-à®‡à®²à¯à®²à®¾à®•à¯à®®à¯-à®¯à®¾à®°à¯à®®à®¾à®Ÿà¯à®Ÿà¯à®®à¯"><a href="#â€œà®¤à¯à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯-à®¤à¯à®µà¯à®µà®¾à®®à¯ˆ-à®‡à®²à¯à®²à®¾à®•à¯à®®à¯-à®¯à®¾à®°à¯à®®à®¾à®Ÿà¯à®Ÿà¯à®®à¯" class="headerlink" title="â€œà®¤à¯à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯ à®¤à¯à®µà¯à®µà®¾à®®à¯ˆ à®‡à®²à¯à®²à®¾à®•à¯à®®à¯ à®¯à®¾à®°à¯à®®à®¾à®Ÿà¯à®Ÿà¯à®®à¯"></a>â€œà®¤à¯à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯ à®¤à¯à®µà¯à®µà®¾à®®à¯ˆ à®‡à®²à¯à®²à®¾à®•à¯à®®à¯ à®¯à®¾à®°à¯à®®à®¾à®Ÿà¯à®Ÿà¯à®®à¯</h1><h1 id="à®‡à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯-à®‡à®©à¯à®šà¯Š-à®²à®µà®°à¯à®•à¯à®•à¯-â€"><a href="#à®‡à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯-à®‡à®©à¯à®šà¯Š-à®²à®µà®°à¯à®•à¯à®•à¯-â€" class="headerlink" title="à®‡à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯ à®‡à®©à¯à®šà¯Š à®²à®µà®°à¯à®•à¯à®•à¯.â€"></a>à®‡à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯ à®‡à®©à¯à®šà¯Š à®²à®µà®°à¯à®•à¯à®•à¯.â€</h1><h1 id="â€”-à®¤à®¿à®°à¯à®•à¯à®•à¯à®±à®³à¯"><a href="#â€”-à®¤à®¿à®°à¯à®•à¯à®•à¯à®±à®³à¯" class="headerlink" title="â€” à®¤à®¿à®°à¯à®•à¯à®•à¯à®±à®³à¯"></a><em>â€” à®¤à®¿à®°à¯à®•à¯à®•à¯à®±à®³à¯</em></h1></blockquote>
<p>Translated meaning (in my words): Poverty will not exist for people who speak pleasant words to everyone.</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">ğŸ  Home</a></li>
         
          <li><a href="/archives/">âœï¸ Blog</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Getting-Started"><span class="toc-number">1.</span> <span class="toc-text">Getting Started</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Basics"><span class="toc-number">2.</span> <span class="toc-text">Basics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bitmaps"><span class="toc-number">3.</span> <span class="toc-text">Bitmaps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Producer-Consumer-Pattern"><span class="toc-number">4.</span> <span class="toc-text">Producer Consumer Pattern</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MULTI-EXEC"><span class="toc-number">5.</span> <span class="toc-text">MULTI EXEC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pub-Sub-Pattern"><span class="toc-number">6.</span> <span class="toc-text">Pub&#x2F;Sub Pattern</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lua-Scripting"><span class="toc-number">7.</span> <span class="toc-text">Lua Scripting</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#More-stuff"><span class="toc-number">8.</span> <span class="toc-text">More stuff</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%9C%E0%AE%A4%E0%AF%81%E0%AE%A9%E0%AF%8D%E0%AE%AA%E0%AF%81%E0%AE%B1%E0%AF%82%E0%AE%89%E0%AE%AE%E0%AF%8D-%E0%AE%A4%E0%AF%81%E0%AE%B5%E0%AF%8D%E0%AE%B5%E0%AE%BE%E0%AE%AE%E0%AF%88-%E0%AE%87%E0%AE%B2%E0%AF%8D%E0%AE%B2%E0%AE%BE%E0%AE%95%E0%AF%81%E0%AE%AE%E0%AF%8D-%E0%AE%AF%E0%AE%BE%E0%AE%B0%E0%AF%8D%E0%AE%AE%E0%AE%BE%E0%AE%9F%E0%AF%8D%E0%AE%9F%E0%AF%81%E0%AE%AE%E0%AF%8D"><span class="toc-number"></span> <span class="toc-text">â€œà®¤à¯à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯ à®¤à¯à®µà¯à®µà®¾à®®à¯ˆ à®‡à®²à¯à®²à®¾à®•à¯à®®à¯ à®¯à®¾à®°à¯à®®à®¾à®Ÿà¯à®Ÿà¯à®®à¯</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E0%AE%87%E0%AE%A9%E0%AF%8D%E0%AE%AA%E0%AF%81%E0%AE%B1%E0%AF%82%E0%AE%89%E0%AE%AE%E0%AF%8D-%E0%AE%87%E0%AE%A9%E0%AF%8D%E0%AE%9A%E0%AF%8A-%E0%AE%B2%E0%AE%B5%E0%AE%B0%E0%AF%8D%E0%AE%95%E0%AF%8D%E0%AE%95%E0%AF%81-%E2%80%9D"><span class="toc-number"></span> <span class="toc-text">à®‡à®©à¯à®ªà¯à®±à¯‚à®‰à®®à¯ à®‡à®©à¯à®šà¯Š à®²à®µà®°à¯à®•à¯à®•à¯.â€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%94-%E0%AE%A4%E0%AE%BF%E0%AE%B0%E0%AF%81%E0%AE%95%E0%AF%8D%E0%AE%95%E0%AF%81%E0%AE%B1%E0%AE%B3%E0%AF%8D"><span class="toc-number"></span> <span class="toc-text">â€” à®¤à®¿à®°à¯à®•à¯à®•à¯à®±à®³à¯</span></a>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://vishnubharathi.codes/blog/redis-adventures/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://vishnubharathi.codes/blog/redis-adventures/&text=Redis Adventures"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://vishnubharathi.codes/blog/redis-adventures/&title=Redis Adventures"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://vishnubharathi.codes/blog/redis-adventures/&is_video=false&description=Redis Adventures"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Redis Adventures&body=Check out this article: https://vishnubharathi.codes/blog/redis-adventures/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://vishnubharathi.codes/blog/redis-adventures/&title=Redis Adventures"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://vishnubharathi.codes/blog/redis-adventures/&title=Redis Adventures"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://vishnubharathi.codes/blog/redis-adventures/&title=Redis Adventures"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://vishnubharathi.codes/blog/redis-adventures/&title=Redis Adventures"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://vishnubharathi.codes/blog/redis-adventures/&name=Redis Adventures&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://vishnubharathi.codes/blog/redis-adventures/&t=Redis Adventures"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
<div class="footer-left">
<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
</div>
<div class="footer-right">
<nav>
<ul>

    <li><a href="/">ğŸ  Home</a></li>
        
    <li><a href="/archives/">âœï¸ Blog</a></li>
        
    <li><a href="/atom.xml">Feed</a></li>
    <li><a href="http://eepurl.com/gUCSRn" target="_blank" rel="noopener noreferrer">Subscribe</a></li>
    <li><div class="rc-scout" style="height: 24px; width: 24px;"></div></li>
</ul>
</nav>
</div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

<!-- Recurse Center -->
<script async defer src="https://www.recurse-scout.com/loader.js?t=9c0d969e43d5103ee1c163128e870dc3"></script>
<!-- Cloudflare analytics -->

<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "3a998e7dd4534719a1186cd0b01043fc"}'></script>


</body>
</html>
