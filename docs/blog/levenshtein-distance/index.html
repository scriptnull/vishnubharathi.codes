<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="You might have heard about the Levenshtein distance while in college or while preparing for tech interviews. It is the famous edit distance problem. It is one of those must-try Dynamic Programming cha">
<meta property="og:type" content="article">
<meta property="og:title" content="The Levenshtein distance in production">
<meta property="og:url" content="https://vishnubharathi.codes/blog/levenshtein-distance/index.html">
<meta property="og:site_name" content="Vishnu Bharathi">
<meta property="og:description" content="You might have heard about the Levenshtein distance while in college or while preparing for tech interviews. It is the famous edit distance problem. It is one of those must-try Dynamic Programming cha">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://media.giphy.com/media/xT1R9YSHqTHAuD9FyU/giphy.gif">
<meta property="og:image" content="https://vishnubharathi.codes/images/git-status.png">
<meta property="og:image" content="https://vishnubharathi.codes/images/edit-distance-readme.png">
<meta property="article:published_time" content="2020-08-22T17:41:29.000Z">
<meta property="article:modified_time" content="2021-10-25T01:19:40.314Z">
<meta property="article:author" content="Vishnu Bharathi">
<meta property="article:tag" content="programming">
<meta property="article:tag" content="algorithms">
<meta property="article:tag" content="recurse center">
<meta property="article:tag" content="open source">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://media.giphy.com/media/xT1R9YSHqTHAuD9FyU/giphy.gif">
    
    
        
          
              <link rel="shortcut icon" href="https://www.gravatar.com/avatar/261fb0f50b7dea501c807ac01f242343?s=16">
          
        
        
          
            <link rel="icon" type="image/png" href="https://www.gravatar.com/avatar/261fb0f50b7dea501c807ac01f242343?s=192" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="https://www.gravatar.com/avatar/261fb0f50b7dea501c807ac01f242343?s=180">
          
        
    
    <!-- title -->
    <title>The Levenshtein distance in production</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Blog</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/blog/rejections/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/blog/learning-to-sort/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://vishnubharathi.codes/blog/levenshtein-distance/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://vishnubharathi.codes/blog/levenshtein-distance/&text=The Levenshtein distance in production"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://vishnubharathi.codes/blog/levenshtein-distance/&title=The Levenshtein distance in production"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://vishnubharathi.codes/blog/levenshtein-distance/&is_video=false&description=The Levenshtein distance in production"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=The Levenshtein distance in production&body=Check out this article: https://vishnubharathi.codes/blog/levenshtein-distance/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://vishnubharathi.codes/blog/levenshtein-distance/&title=The Levenshtein distance in production"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://vishnubharathi.codes/blog/levenshtein-distance/&title=The Levenshtein distance in production"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://vishnubharathi.codes/blog/levenshtein-distance/&title=The Levenshtein distance in production"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://vishnubharathi.codes/blog/levenshtein-distance/&title=The Levenshtein distance in production"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://vishnubharathi.codes/blog/levenshtein-distance/&name=The Levenshtein distance in production&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://vishnubharathi.codes/blog/levenshtein-distance/&t=The Levenshtein distance in production"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Problem-statement"><span class="toc-number">1.</span> <span class="toc-text">Problem statement</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Git"><span class="toc-number">2.</span> <span class="toc-text">Git</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Where-else"><span class="toc-number">3.</span> <span class="toc-text">Where else?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cobra"><span class="toc-number">4.</span> <span class="toc-text">Cobra</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Closing"><span class="toc-number">5.</span> <span class="toc-text">Closing</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        The Levenshtein distance in production
    </h1>



    <div class="meta">
      
    <div class="postdate">
      
        <time datetime="2020-08-22T17:41:29.000Z" itemprop="datePublished">2020-08-22</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/algorithms/" rel="tag">algorithms</a>, <a class="tag-link-link" href="/tags/open-source/" rel="tag">open source</a>, <a class="tag-link-link" href="/tags/programming/" rel="tag">programming</a>, <a class="tag-link-link" href="/tags/recurse-center/" rel="tag">recurse center</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>You might have heard about the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein distance</a> while in college or while preparing for tech interviews. It is the famous <a target="_blank" rel="noopener" href="https://leetcode.com/problems/edit-distance/">edit distance problem</a>. It is one of those must-try <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Dynamic_programming">Dynamic Programming</a> challenges.</p>
<p>You still there? even after I said the words “Dynamic Programming”? haha. Good! Because unlike you, I am good at running away from it; most of the time. But I am kind of sitting down to learn + practice this stuff now.</p>
<p><a target="_blank" rel="noopener" href="https://www.manning.com/books/grokking-algorithms">This amazing book</a> played a major role in making this topic a little less scary for me. What intrigued me the most is the spot where the author tries to explain some practical applications for dynamic programming.</p>
<p>Among all the applications I read there, two of them were practical and in-fact something that I use almost every day. One is in diff tools like <code>git diff</code> to compare text and another one is in spell checkers to figure out the closest matching words to the spelling we typed.</p>
<p>That’s great! Those are some “open up and read the source code” kind of things. Guess what, I love those kinds of things. Instead of sinking into interview prep materials one after another, I might take this as a fun chance to learn some code that is used in the wild!</p>
<p><img src="https://media.giphy.com/media/xT1R9YSHqTHAuD9FyU/giphy.gif" alt="missed hi5"></p>
<p>So let us learn about the problem, the way it is implemented in some open-source software (which are used by a lot of people - like a really really big number).</p>
<h2 id="Problem-statement"><a href="#Problem-statement" class="headerlink" title="Problem statement"></a>Problem statement</h2><p>I am going to copy-paste from Wikipedia to help me here.</p>
<blockquote>
<p> the Levenshtein distance is a string metric for measuring the difference between two sequences</p>
</blockquote>
<p>Basically, it is a way of comparing two strings.</p>
<blockquote>
<p>Informally, the Levenshtein distance between two words is the minimum number of single-character edits (insertions, deletions, or substitutions) required to change one word into the other.</p>
</blockquote>
<p>Consider spell checkers. When you type something, the spell checking software should suggest you which is often a valid English word with a minimal Levenshtein distance.</p>
<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><p>Here is the cool thing: <a target="_blank" rel="noopener" href="https://github.com/git/git">Git</a> uses dynamic programming. Apart from the mention in that book regarding <code>git diff</code>, I found an elegant use-case of Levenshtein distance in some other part of git.</p>
<p>Here is how I found this out. I usually end up typing the git sub-commands wrongly at least once per day. Git would intelligently understand what I am trying to type and output a suggestion like this</p>
<p><img src="/images/git-status.png" alt="git-status"></p>
<p>So, what is git doing here? It is just spell-checking the sub-command I typed in by comparing it against all the valid git sub-commands. Cool, at that point in time I was like “I think git might be using the Levenshtein distance to do this”.</p>
<p>Then I started <a target="_blank" rel="noopener" href="https://github.com/git/git/search?q=The+most+similar+commands+are&amp;unscoped_q=The+most+similar+commands+are">greping “The most similar commands are”</a> in the git source code to dig deep into the source code.</p>
<p>Bingo! Of course it uses the Levenshtein distance :)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">levenshtein</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *string1, <span class="keyword">const</span> <span class="keyword">char</span> *string2,</span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="keyword">int</span> swap_penalty, <span class="keyword">int</span> substitution_penalty,</span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="keyword">int</span> insertion_penalty, <span class="keyword">int</span> deletion_penalty)</span></span>;</span><br></pre></td></tr></table></figure>
<p>Here is the <a target="_blank" rel="noopener" href="https://github.com/git/git/blob/53f9a3e157dbbc901a02ac2c73346d375e24978c/levenshtein.h">header file</a> that declares the function and the <a target="_blank" rel="noopener" href="https://github.com/git/git/blob/53f9a3e157dbbc901a02ac2c73346d375e24978c/levenshtein.c">c implementation of the logic</a>.</p>
<p>It gets called in <a target="_blank" rel="noopener" href="https://github.com/git/git/blob/4f0a8be78499454eac3985b6e7e144b8376ab0a5/help.c#L514-L623">help.c</a>, the source file responsible for showing help message in git.</p>
<p>The function first loads all the valid sub-commands of git (including the aliases we have - just knew this fact while digging the source).</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">load_command_list(<span class="string">&quot;git-&quot;</span>, &amp;main_cmds, &amp;other_cmds);</span><br><span class="line"></span><br><span class="line">add_cmd_list(&amp;main_cmds, &amp;aliases);</span><br><span class="line">add_cmd_list(&amp;main_cmds, &amp;other_cmds);</span><br><span class="line">QSORT(main_cmds.names, main_cmds.cnt, cmdname_compare);</span><br><span class="line">uniq(&amp;main_cmds);</span><br></pre></td></tr></table></figure>
<p>After that, it computes the Levenshtein distance and decides which command to suggest.</p>
<p>One interesting thing that I noted is how <em>practical</em> the code is. If we just see it as an interview prep thing, we might just write a recursive implementation and be done with it (which is usually simpler than writing an iterative approach). But in real-world a recursive approach might result in a stack overflow. Hence, an iterative approach to solving this problem is much more desirable.</p>
<p>Also, see the level of optimization, they do! A comment from the source below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* The idea is to build a distance matrix for the substrings of both</span><br><span class="line">* strings.  To avoid a large space complexity, only the last three rows</span><br><span class="line">* are kept in memory (if swaps had the same or higher cost as one deletion</span><br><span class="line">* plus one insertion, only two rows would be needed).</span><br></pre></td></tr></table></figure>
<p> At any given point of time, they are just using 3 rows of the memo table to figure out the answer, instead of keeping the entire memo table in memory.</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">levenshtein</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *string1, <span class="keyword">const</span> <span class="keyword">char</span> *string2,</span></span></span><br><span class="line"><span class="function"><span class="params">		<span class="keyword">int</span> w, <span class="keyword">int</span> s, <span class="keyword">int</span> a, <span class="keyword">int</span> d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> len1 = <span class="built_in">strlen</span>(string1), len2 = <span class="built_in">strlen</span>(string2);</span><br><span class="line">	<span class="keyword">int</span> *row0, *row1, *row2;</span><br><span class="line">	<span class="keyword">int</span> i, j;</span><br><span class="line"></span><br><span class="line">	ALLOC_ARRAY(row0, len2 + <span class="number">1</span>);</span><br><span class="line">	ALLOC_ARRAY(row1, len2 + <span class="number">1</span>);</span><br><span class="line">	ALLOC_ARRAY(row2, len2 + <span class="number">1</span>);</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">//...........</span></span><br><span class="line">	<span class="comment">//...........</span></span><br><span class="line"></span><br><span class="line">	i = row1[len2];</span><br><span class="line">	<span class="built_in">free</span>(row0);</span><br><span class="line">	<span class="built_in">free</span>(row1);</span><br><span class="line">	<span class="built_in">free</span>(row2);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Where-else"><a href="#Where-else" class="headerlink" title="Where else?"></a>Where else?</h2><p>After a while of staring at git source code today with a little bit of struggle reading C and getting into all the details of the solution, I wanted to read the implementation in some other programs as well. There are lot of command-line tools and I have noticed a lot of the good ones support this spell check feature.</p>
<p>In fact this kind of functionality should typically be provided by the sub-command parsing cli library so that it is available more easily to cli writers. I was right again! Since I am into Go recently, I tried searching through a famous command line parser library for Go called <a target="_blank" rel="noopener" href="https://github.com/spf13/cobra">Cobra</a>.</p>
<blockquote>
<p>Cobra is used in many Go projects such as Kubernetes, Hugo, and Github CLI to name a few</p>
</blockquote>
<h2 id="Cobra"><a href="#Cobra" class="headerlink" title="Cobra"></a>Cobra</h2><p><a target="_blank" rel="noopener" href="https://github.com/spf13/cobra">Cobra</a> contains a reference to Levenshtein distance in the <a target="_blank" rel="noopener" href="https://github.com/spf13/cobra#suggestions-when-unknown-command-happens">README file</a>.</p>
<p><img src="/images/edit-distance-readme.png" alt="edit-distance-readme"></p>
<p>Cool, it even has the configuration to choose the distance based on which the suggestions should be picked.</p>
<p>Now, on to the source code. It is written as <a target="_blank" rel="noopener" href="https://github.com/spf13/cobra/blob/993cc5372a05240dfd59e3ba952748b36b2cd117/cobra.go#L164">a simple function</a>.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ld compares two strings and returns the levenshtein distance between them.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ld</span><span class="params">(s, t <span class="keyword">string</span>, ignoreCase <span class="keyword">bool</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> ignoreCase &#123;</span><br><span class="line">		s = strings.ToLower(s)</span><br><span class="line">		t = strings.ToLower(t)</span><br><span class="line">	&#125;</span><br><span class="line">	d := <span class="built_in">make</span>([][]<span class="keyword">int</span>, <span class="built_in">len</span>(s)+<span class="number">1</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">range</span> d &#123;</span><br><span class="line">		d[i] = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(t)+<span class="number">1</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">range</span> d &#123;</span><br><span class="line">		d[i][<span class="number">0</span>] = i</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> j := <span class="keyword">range</span> d[<span class="number">0</span>] &#123;</span><br><span class="line">		d[<span class="number">0</span>][j] = j</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= <span class="built_in">len</span>(t); j++ &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">			<span class="keyword">if</span> s[i<span class="number">-1</span>] == t[j<span class="number">-1</span>] &#123;</span><br><span class="line">				d[i][j] = d[i<span class="number">-1</span>][j<span class="number">-1</span>]</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				min := d[i<span class="number">-1</span>][j]</span><br><span class="line">				<span class="keyword">if</span> d[i][j<span class="number">-1</span>] &lt; min &#123;</span><br><span class="line">					min = d[i][j<span class="number">-1</span>]</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> d[i<span class="number">-1</span>][j<span class="number">-1</span>] &lt; min &#123;</span><br><span class="line">					min = d[i<span class="number">-1</span>][j<span class="number">-1</span>]</span><br><span class="line">				&#125;</span><br><span class="line">				d[i][j] = min + <span class="number">1</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> d[<span class="built_in">len</span>(s)][<span class="built_in">len</span>(t)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It is an iterative solution. To understand it better, I copy-pasted the function onto the <a target="_blank" rel="noopener" href="https://play.golang.org/">Go playground</a> and started playing around with it.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Edit distance = %d&quot;</span>, ld(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;ac&quot;</span>, <span class="literal">true</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The answer correctly came up as 1. (just 1 deletion operation of b)</p>
<p>Now let me try to go line by line and try to figure out what is happening.</p>
<p>We accept two input strings <code>s</code> and <code>t</code>. We ignore the cases if the flag is set.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ignoreCase &#123;</span><br><span class="line">	s = strings.ToLower(s)</span><br><span class="line">	t = strings.ToLower(t)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>After that, we create a two-dimensional array called <code>d</code> to act as the memo table.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">d := <span class="built_in">make</span>([][]<span class="keyword">int</span>, <span class="built_in">len</span>(s)+<span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> i := <span class="keyword">range</span> d &#123;</span><br><span class="line">	d[i] = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(t)+<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now to visualize things, I am adding a little function that prints the memo table.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   &quot;  a  c </span><br><span class="line">&quot;  0  0  0 </span><br><span class="line">a  0  0  0 </span><br><span class="line">b  0  0  0 </span><br><span class="line">c  0  0  0 </span><br></pre></td></tr></table></figure>
<p> Next, we initialize the first column of every row with the value of the row index.</p>
 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i := <span class="keyword">range</span> d &#123;</span><br><span class="line">	d[i][<span class="number">0</span>] = i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now the table becomes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   &quot;  a  c </span><br><span class="line">&quot;  0  0  0 </span><br><span class="line">a  1  0  0 </span><br><span class="line">b  2  0  0 </span><br><span class="line">c  3  0  0 </span><br></pre></td></tr></table></figure>
<p>After that, we initialize the first row of every column to the value of the column index.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> j := <span class="keyword">range</span> d[<span class="number">0</span>] &#123;</span><br><span class="line">	d[<span class="number">0</span>][j] = j</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>That yields</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   &quot;  a  c </span><br><span class="line">&quot;  0  1  2 </span><br><span class="line">a  1  0  0 </span><br><span class="line">b  2  0  0 </span><br><span class="line">c  3  0  0</span><br></pre></td></tr></table></figure>
<p>That completes the base case: “When you start with an empty string and start building the strings, the operation count would just increase by one as it involves only one insertion operation.</p>
<p>Now, we start filling the inner parts of the table.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= <span class="built_in">len</span>(t); j++ &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">		<span class="comment">// logic</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Ah nice, that felt so easy. If the row and column alphabet value are the same, then we don’t need to perform any operation and hence we get to use the last counted operation value by looking at the diagonal.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> s[i<span class="number">-1</span>] == t[j<span class="number">-1</span>] &#123;</span><br><span class="line">	d[i][j] = d[i<span class="number">-1</span>][j<span class="number">-1</span>]</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For example: Here is the final table. Notice how <code>(a,a)</code> is filled up with looking at the diagonal <code>(&quot;,&quot;)</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   &quot;  a  c That is because, when the resulting string is already &#96;a&#96; there is no need to perform any </span><br><span class="line">&quot;  0  1  2 </span><br><span class="line">a  1  0  1 </span><br><span class="line">b  2  1  1 </span><br><span class="line">c  3  2  1 </span><br></pre></td></tr></table></figure>
<p>If the alphabets differ, then we need to perform one of the operations (insert, remove, replace) to arrive at the desired alphabet. It seems like the way we figure out this is by finding the minimum of the adjacent cells (that are already filled) and adding 1 to it (to effectively say that we need to perform one more operation)</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">min := d[i<span class="number">-1</span>][j]</span><br><span class="line"><span class="keyword">if</span> d[i][j<span class="number">-1</span>] &lt; min &#123;</span><br><span class="line">	min = d[i][j<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> d[i<span class="number">-1</span>][j<span class="number">-1</span>] &lt; min &#123;</span><br><span class="line">	min = d[i<span class="number">-1</span>][j<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line">d[i][j] = min + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>So, at last, we return the last cell of the matrix.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> d[<span class="built_in">len</span>(s)][<span class="built_in">len</span>(t)]</span><br></pre></td></tr></table></figure>
<p>It may not be obvious of what is going on especially in the last part of the code explanation above (apologies for not trying to explain that here). The recommendation for it is to watch/read some tutorial on how the memo table is filled up like this. The point of this explanation is to share how cleanly those ideas behind filling up the memo table is implemented in the library code.</p>
<h2 id="Closing"><a href="#Closing" class="headerlink" title="Closing"></a>Closing</h2><p>The main difficulty I feel here is the arrival of the idea behind the memo table. What should be the columns and rows? What should be the values that should be filled up in the cells? How do we compute the value of each cell?</p>
<p>Apart from the interview prep point of view, knowing these techniques (just knowing that these kinds of techniques exist in the world) can be a nice addition to one’s problem-solving toolbox. The next time you are working on a cli app or some other app that needs spell check like suggestions, you know what to do!</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Blog</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Problem-statement"><span class="toc-number">1.</span> <span class="toc-text">Problem statement</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Git"><span class="toc-number">2.</span> <span class="toc-text">Git</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Where-else"><span class="toc-number">3.</span> <span class="toc-text">Where else?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cobra"><span class="toc-number">4.</span> <span class="toc-text">Cobra</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Closing"><span class="toc-number">5.</span> <span class="toc-text">Closing</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://vishnubharathi.codes/blog/levenshtein-distance/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://vishnubharathi.codes/blog/levenshtein-distance/&text=The Levenshtein distance in production"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://vishnubharathi.codes/blog/levenshtein-distance/&title=The Levenshtein distance in production"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://vishnubharathi.codes/blog/levenshtein-distance/&is_video=false&description=The Levenshtein distance in production"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=The Levenshtein distance in production&body=Check out this article: https://vishnubharathi.codes/blog/levenshtein-distance/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://vishnubharathi.codes/blog/levenshtein-distance/&title=The Levenshtein distance in production"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://vishnubharathi.codes/blog/levenshtein-distance/&title=The Levenshtein distance in production"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://vishnubharathi.codes/blog/levenshtein-distance/&title=The Levenshtein distance in production"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://vishnubharathi.codes/blog/levenshtein-distance/&title=The Levenshtein distance in production"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://vishnubharathi.codes/blog/levenshtein-distance/&name=The Levenshtein distance in production&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://vishnubharathi.codes/blog/levenshtein-distance/&t=The Levenshtein distance in production"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
<div class="footer-left">
<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
</div>
<div class="footer-right">
<nav>
<ul>

    <li><a href="/">Home</a></li>
        
    <li><a href="/archives/">Blog</a></li>
        
    <li><a href="/atom.xml">Feed</a></li>
    <li><a href="http://eepurl.com/gUCSRn" target="_blank" rel="noopener noreferrer">Subscribe</a></li>
    <li><div class="rc-scout" style="height: 24px; width: 24px;"></div></li>
</ul>
</nav>
</div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-64308743-3', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

<!-- Recurse Center -->
<script async defer src="https://www.recurse-scout.com/loader.js?t=9c0d969e43d5103ee1c163128e870dc3"></script>

</body>
</html>
